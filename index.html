<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creature Universe - Incubator & Breeder</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-header">
        <div id="app-title">Creature Universe</div>
        <div id="model-status-header">Models: 0 / 186</div>
        <button id="hamburger-menu-button" title="Upload Models">&#9776;</button>
    </div>

    <div id="upload-modal">
        <div id="upload-modal-content">
            <button class="modal-close-button" id="close-upload-modal" title="Close">&times;</button>
            <h2>Upload Creature Models (.glb)</h2>
            <p>Select up to 186 model files. Filenames should match expected names (e.g., "Mirefin.glb", "Ancient Mirefin.glb").</p>
            <input type="file" id="model-file-input" multiple accept=".glb">
            <div id="upload-progress-bar-container">
                <div id="upload-progress-bar">0%</div>
            </div>
            <div id="file-list-preview"></div>
            <button id="process-uploaded-files" class="modal-button" style="margin-top: 15px;">Load Selected Files</button>
        </div>
    </div>

    <div id="main-container">
        <div id="controls">
            <h3>Incubation & Evolution</h3>
            <div class="control-group">
                <label for="environmentSelect">Incubation/Evolution Environment:</label>
                <select id="environmentSelect"></select>
            </div>
            <button id="startIncubationButton">Start Incubation (New Egg)</button>
            <div id="timer">Time: 02:00</div>
            <div id="hybridEggMessage" style="display:none;">Hybrid Egg Ready!</div>
            <button id="evolveCreatureButton" style="margin-top: 10px;">Evolve Active Creature</button>
            <button id="storeActiveCreatureButton" style="margin-top: 10px;">Store Active Creature</button>
            <h3 style="margin-top: 20px;">Mating</h3>
            <button id="mateButton" style="margin-top: 5px;">Mate Selected Creatures</button>
        </div>

        <div id="viewerContainer"></div>

        <div id="storage-panel">
            <h3>Creature Storage (Max 10)</h3>
            <ul id="storedCreaturesList">
                {/* Creature slots dynamically added */}
            </ul>
        </div>
    </div>
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.163.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.163.0/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="script.js"></script>
</body>
</html>